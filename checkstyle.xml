<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
  "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
"https://checkstyle.org/dtds/configuration_1_3.dtd">

<module name="Checker">

  <module name="SuppressionFilter">
      <property name="file" value="checkstyle-suppressions.xml"/>
  </module>

  <!-- Make messages show file/line/col -->
  <module name="SeverityMatchFilter"/>

  <!-- Line length -->
  <module name="LineLength">
    <property name="max" value="100"/>
    <property name="ignorePattern"
              value="^package\s|^import\s|https?://|@|^\s*\*"/>
  </module>

  <!-- Header Comment -->
  <module name="RegexpHeader">
    <property name="header"
              value="//\s+.+\n//\s+\d{2}/\d{2}/\d{4}\n//\s+CSE\s+12\d\n//\s+P\d+:\s+.+\n//\s+TA:\s+.+"/>
    <property name="fileExtensions" value="java"/>
  </module>

  <module name="TreeWalker">

    <!-- =========================================
         MEMBER ORDERING
         ========================================= -->

    <module name="DeclarationOrder"/>

    <!-- =========================================
         FORMATTING
         ========================================= -->

    <!-- Curly brace style (same-line open, etc.) -->
    <module name="LeftCurly">
      <property name="option" value="eol"/>
    </module>
    <module name="RightCurly">
      <property name="option" value="same"/>
    </module>

    <!-- Whitespace rules (method headers/calls, operators, etc.) -->
    <module name="WhitespaceAround"/>
    <module name="WhitespaceAfter"/>

    <!-- One statement per line -->
    <module name="OneStatementPerLine"/>

    <!-- Require braces on control statements -->
    <module name="NeedBraces"/>

    <!-- Empty lines: “blank line before each method comment” cannot be done perfectly
         but this enforces separation between members. -->
    <module name="EmptyLineSeparator">
      <property name="allowNoEmptyLineBetweenFields" value="true"/>
      <property name="allowMultipleEmptyLines" value="false"/>
    </module>

    <!-- Enforces 4 spaces even though 3 is fine -->
    <module name="Indentation">
      <property name="basicOffset" value="4"/>
      <property name="braceAdjustment" value="0"/>
      <property name="caseIndent" value="4"/>
      <property name="lineWrappingIndentation" value="8"/>
      <property name="throwsIndent" value="8"/>
      <property name="arrayInitIndent" value="4"/>
    </module>

    <!-- =========================================
         NAMING
         ========================================= -->

    <module name="TypeName"/>
    <module name="MethodName"/>
    <module name="ParameterName"/>
    <module name="LocalVariableName"/>
    <module name="MemberName"/>

    <!-- Constants SCREAMING_CASE -->
    <module name="ConstantName"/>

    <!-- =========================================
         FIELDS / ACCESS MODIFIERS
         ========================================= -->

    <module name="VisibilityModifier">
      <property name="allowPublicFinalFields" value="true"/>
      <property name="allowPublicImmutableFields" value="true"/>
      <property name="protectedAllowed" value="false"/>
      <property name="packageAllowed" value="false"/>
    </module>

    <!-- =========================================
         EXCEPTIONS / CONTROL FLOW FORBIDDEN FEATURES
         ========================================= -->

    <!-- No lambdas / method references (Java 8) -->
    <module name="IllegalToken">
      <property name="tokens" value="LAMBDA,METHOD_REF"/>
    </module>

    <!-- No 'var' keyword (Java 10 local var inference) -->
    <module name="RegexpSinglelineJava">
      <property name="format" value="(^|\s)\bvar\b\s+\w+"/>
      <property name="message" value="The 'var' keyword is not allowed."/>
    </module>

    <!-- =========================================
         JavaDocs
         ========================================= -->

    <module name="MissingJavadocType">
      <property name="scope" value="public"/>
    </module>

    <module name="MissingJavadocMethod">
      <property name="scope" value="public"/>
      <property name="allowMissingPropertyJavadoc" value="false"/>
      <property name="ignoreMethodNamesRegex" value="main"/>
    </module>
  </module>
</module>
